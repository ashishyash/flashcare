<div class="dashboard-container">
  <!-- Header -->
  <mat-toolbar color="primary" class="dashboard-header">
    <h1>Crisis Management Dashboard</h1>
  </mat-toolbar>

  <!-- Strike Alert Banner -->
  <div class="strike-alert-banner">
    <div class="alert-content">
      <div class="alert-title">{{ strikeTitle }}</div>
      <div class="alert-subtitle">{{ strikeStartTime }}</div>
      <div class="countdown-timer">
        <mat-icon>schedule</mat-icon>
        <span>{{ countdownTime }}</span>
      </div>
    </div>
  </div>

  <mat-card class="main-card">
    <!-- Key Metrics Section -->
    <div class="section">
      <h2 class="section-title">Key Metrics (4 cards)</h2>
      <div class="metrics-grid">
        <mat-card
          *ngFor="let metric of metrics;"
          [ngClass]="'metric-card ' + getMetricClass(metric.color)"
          class="metric-card"
        >
          <mat-card-content>
            <div class="metric-value">{{ metric.value }}</div>
            <div class="metric-label">{{ metric.label }}</div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Unit Status Table -->
    <div class="section">
      <h2 class="section-title">Unit Status Table</h2>
      <table mat-table [dataSource]="unitStatusData" class="unit-status-table">
        <!-- Unit Column -->
        <ng-container matColumnDef="unit">
          <th mat-header-cell *matHeaderCellDef>Unit</th>
          <td mat-cell *matCellDef="let element">{{ element.unit }}</td>
        </ng-container>

        <!-- Staffed Column -->
        <ng-container matColumnDef="staffed">
          <th mat-header-cell *matHeaderCellDef>Staffed (%)</th>
          <td mat-cell *matCellDef="let element">
            <div class="staffed-cell">
              <mat-progress-bar
                mode="determinate"
                [value]="element.staffed"
                [ngClass]="'status-' + element.status"
              ></mat-progress-bar>
              <span class="status-text">{{ element.staffed }}%</span>
            </div>
          </td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let element" [ngClass]="'status-badge status-' + element.status">
            {{ element.status | uppercase }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

    <!-- Activity Feed Section -->
    <div class="section">
      <h2 class="section-title">Activity Feed</h2>
      <mat-list>
        <mat-list-item *ngFor="let activity of activityFeed; trackBy: trackByActivity">
          <mat-icon matListItemIcon>schedule</mat-icon>
          <div matListItemTitle class="activity-time">{{ activity.timestamp }}</div>
          <div matListItemLine class="activity-message">{{ activity.message }}</div>
          <mat-divider></mat-divider>
        </mat-list-item>
      </mat-list>
    </div>

    <!-- Quick Actions Section -->
    <div class="section quick-actions-section">
      <h2 class="section-title">Quick Actions</h2>
      <div class="button-group">
        <button
          mat-raised-button
          color="accent"
          (click)="onFindNurses()"
          class="action-button"
        >
          <mat-icon>search</mat-icon>
          Find Nurses
        </button>
        <button
          mat-raised-button
          color="accent"
          (click)="onViewDeploymentMap()"
          class="action-button"
        >
          <mat-icon>map</mat-icon>
          View Deployment Map
        </button>
        <button
          mat-raised-button
          color="accent"
          (click)="onGenerateReport()"
          class="action-button"
        >
          <mat-icon>description</mat-icon>
          Generate Report
        </button>
      </div>
    </div>
  </mat-card>
</div>